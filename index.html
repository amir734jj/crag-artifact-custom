 <TITLE>ContextfreeGrammar</TITLE>  <H1>ContextfreeGrammar</H1> <P><B>Using circular attributes to compute nullable, first, and follow.</B></P><P>This is an example of a JastAdd project that makes heavy use of circular attributes. A language "CFG"is defined that allows context-free grammars to be written on a typicalBackus-Naur Form. JastAdd aspects with circular attributes are used for defining the following properties:</P><UL>  <LI><B>nullable()</B>: true if a nonterminal can derive the empty string. </LI>  <LI><B>first()</B>: the set of terminal symbols that derivations of a nonterminal can start with</LI>  <LI><B>follow()</B>: the set of terminal symbols that can follow a nonterminal in a derivation</LI></UL><P>The definitions of nullable(), first(), and follow() are natural to express using mutually recursive equations. For example,the value of nullable() for a nonterminal depends on the value of nullable() for other nonterminals, possibly including itself. Similarly forthe first() set which in addition depends on nullable(). And similarly for the follow() set which in addition dependson first() and nullable(). These equations can be mapped in a straight-forward way to circular attributes. </P><P>To make use of circular attributes, their values should be arranged in a lattice of finite height, and all equations monotonic, i.e.,such that they can only raise the attribute to a higher level in the lattice. The computation of the attribute can thenbe performed with a terminating iteration. The nullable() attribute makes use ofa boolean lattice with FALSE at the bottom and TRUE at the top. Equations can only raise the value from thestarting value FALSE. </P><P>The first() and follow() attributes make use of set lattices with the empty set at the bottom and the set of allterminal symbols at the top. The equations can only raise the value to sets including more terminal symbols.</P><P>The implementation also makes use of a reference attribute <B>decl()</B> which binds uses of nonterminals(i.e., nonterminal occurrences in the right-handside of productions) to declarations of the corresponding nonterminal (i.e., nonterminal occurrences in theleft-hand side of a production). The decl() attribute is used for propagating information about nonterminal declarationsdirectly to their uses. </P>For a more detailed discussion of the example, see thearticle "<A HREF="http://www.cs.lth.se/~gorel/publications/2004-CRAGs-SCP-Preprint.pdf">Circular Reference Attributed Grammars- Their Evaluation and Applications</A>".</P><H2>Contents of this directory</H2><UL>   <LI><A HREF="ContextfreeGrammar.zip"><I>ContextfreeGrammar.zip</I></A>   for downloading the example to your computer</LI>      <LI><B>grammars</B>   <UL>         <LI><A HREF="CFG.ast"><I>CFG.ast</I></A><I>:</I> abstract   grammar for the language describing context-free grammars.</LI>         <LI><A HREF="CFGrammar.jjt"><I>CFGrammar.jjt</I></A>: parsing and   AST-building grammar for the CFG language (input to the tool   jjtree). An example explaining how jjtree interacts with JastAdd is available <a href="../CalcTree/index.html">here</a></LI>      </UL>   </LI>      <LI><B>aspects</B>   <UL>      <LI><A HREF="NameAnalysis.jrag"><I>NameAnalysis.jrag</I></A>:   Defines name analysis for   nonterminal names in the CFG language: Each use of a nonterminal name (<I>NUse</I>) has a reference attribute <I>decl()</I>   that refers to the   appropriate declaration of the nonterminal (<I>NDecl</I>).</LI>      <LI><A HREF="Nullable.jrag"><I>Nullable.jrag</I></A>:   Uses circular attributes for computing whether a   nonterminal is nullable or not: Each nonterminal declaration (<I>NDecl</I>) has a boolean attribute <I>nullable()</I>.</LI>      <LI><A HREF="First.jrag"><I>First.jrag</I></A>:   Uses circular attributes for computing the set   of first symbols for nonterminals: Each nonterminal declaration (<I>NDecl</I>) has a set attribute <I>first()</I> whose elements   are the terminal symbols (represented as Strings) that belong to the First set.</LI>      <LI><A HREF="Follow.jrag"><I>Follow.jrag</I></A>:   Uses circular attributes for computing the set   of follow symbols for nonterminals: Each nonterminal declaration (<I>NDecl</I>) has a set attribute <I>follow()</I> whose elements   are the terminal symbols (represented as Strings) that belong to the Follow set.</LI>      <LI><A HREF="PrettyPrint.jrag"><I>PrettyPrint.jrag</I></A>:   Defines a string attribute <I>pp()</I> that is a prettyprinted   representation of a CFG.</LI>   </UL>   </LI>      <LI><B>tests</B>: package containing JUnit test cases.      <UL>      <LI><A HREF="tests/TestNullable.java"><I>TestNullable.java</I></A><I>:</I>      tests the computation of nullable as defined in <I>Nullable.jrag</I>.</LI>            <LI><A HREF="tests/TestFirst.java"><I>TestFirst.java</I></A><I>:</I>      tests the computation of the first set as defined in <I>First.jrag</I>.</LI>      <LI><A HREF="tests/TestFollow.java"><I>TestFollow.java</I></A><I>:</I>      tests the computation of the follow set as defined in <I>Follow.jrag</I>.</LI>      <LI><A HREF="tests/TestNameAnalysis.java"><I>TestNameAnalysis.java</I></A><I>:</I>      tests the name analysis as defined in <I>NameAnalysis.jrag</I>.</LI>      <LI><A HREF="tests/TestParser.java"><I>TestParser.java</I></A><I>:</I>      tests the prettyprinting as defined in <I>PrettyPrint.jrag</I>.</LI>   </UL>   </LI>      <LI><B>TestGrammars</B>: directory containing input and output files   to the JUnit test cases. The input files are grammars written in the   CFG language. Output files are only available for the large grammars,   and contain the results of computing nullable, first, and follow.   <UL>     <LI><A HREF="TestGrammars/TestGrammarSimple">TestGrammarSimple</A>: A very simple     context-free grammar.     </LI>     <LI>A number of context-free grammars exercising various special     cases of empty and alternative productions:       <UL>         <LI><A HREF="TestGrammars/TestEmptyProd">TestEmptyProd</A>         </LI>         <LI><A HREF="TestGrammars/TestEmptyAlternativeProd">TestEmptyAlternativeProd</A>         </LI>         <LI><A HREF="TestGrammars/TestAlternativeEmptyProd">TestAlternativeEmptyProd</A>         </LI>         <LI><A HREF="TestGrammars/TestAlternativeProd">TestAlternativeProd</A>         </LI>         <LI><A HREF="TestGrammars/TestFirstEmptyAlternatives">TestFirstEmptyAlternatives</A>         </LI>       </UL>     </LI>     <LI><A HREF="TestGrammars/TestAppelGrammar">TestAppelGrammar</A>:     A small but nontrivial example grammar, taken from Andrew Appel's book     "Modern Compiler Implementation in Java".     </LI>     <LI><A HREF="TestGrammars/TestManyProds">TestManyProds</A>:     A small grammar with a few productions, only used for testing     the prettyprinting functionality.     </LI>     <LI>Test of Java grammar. The grammar is sorted alphabetically to facilitate     comparison with expected results.        <UL>         <LI><A HREF="TestGrammars/TestJavaGrammarSorted">TestJavaGrammarSorted</A>:         A context-free grammar for Java, sorted alphabetically.         </LI>         <LI><A HREF="TestGrammars/TestJavaGrammarNullableResult">TestJavaGrammarNullableResult</A>:         The expected result for the computation of nullable for each nonterminal.         </LI>         <LI><A HREF="TestGrammars/TestJavaGrammarFirstResult">TestJavaGrammarFirstResult</A>:         The expected result for the computation of the First set for each nonterminal.         </LI>         <LI><A HREF="TestGrammars/TestJavaGrammarFollowResult">TestJavaGrammarFollowResult</A>:         The expected result for the computation of the Follow set for each nonterminal.         </LI>       </UL>     </LI>   </UL   </LI>         <LI><B>testframework</B>: package containing classes useful for   testing      <UL>      <LI><A HREF="testframework/FileContentsTestCase.java"><I>FileContentsTestCase.java</I></A>:      Can compare the contents of two files, ignoring whitespace.</LI>            <LI><A HREF="testframework/TestAll.java"><I>TestAll.java</I></A>:      Used for finding all testcases when running tests from a      terminal window.</LI>   </UL>   </LI>       <LI><B>tools</B>: directory containing all the tools you need to   run this JastAdd project (jastadd, javacc, junit).    </LI>      <LI><B>build.xml</B>: Ant build file to be   used from a terminal window and from Eclipse      <UL>      <LI>Use the targets <I>build</I> (default), <I>test</I>, and      <I>clean</I>, when working from a terminal window. For example,      type<TABLE BORDER=1>         <TR>            <TD>               <PRE>ant</PRE>            </TD>            <TD>               <P>generate all java files and compile them</P>            </TD>         </TR>         <TR>            <TD>               <PRE>ant test</PRE>            </TD>            <TD>               <P>run all test cases</P>            </TD>         </TR>         <TR>            <TD>               <PRE>ant clean</PRE>            </TD>            <TD>               <P>remove all generated files and all the class files               for both generated and handwritten java files</P>            </TD>         </TR>      </TABLE>      </LI>            <LI>Use the targets <I>gen</I> and <I>cleanGen</I> when working      from eclipse (see <A HREF="http://jastadd.cs.lth.se/web/manual/eclipse.shtml">Running      JastAdd Under Eclipse</A>):<TABLE BORDER=1>         <TR>            <TD>               <PRE>ant gen</PRE>            </TD>            <TD>               <P>generate all java files</P>            </TD>         </TR>         <TR>            <TD>               <PRE>ant cleanGen</PRE>            </TD>            <TD>               <P>remove all generated files and their class               files.</P>            </TD>         </TR>      </TABLE>      </LI>   </UL>   </LI>      <LI><B>AST</B>: package containing files generated by the tools   (JavaCC and JastAdd). This directory is not present when the   project is "clean". The directory will contain parser files   generated by JavaCC and AST files generated by JastAdd.</LI>      <!--   <LI><A HREF="release.txt"><I>release.txt</I></A> Release and   version information about the example</LI>   --></UL>